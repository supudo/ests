<% provide(:title, t('profile')) %>
<h1><%= t('profile') %></h1>

<div class="row">
  <div class="span6 offset3">
    <div class="col-md-4 col-md-offset-4">
      <div class="login-panel panel panel-default">
        <div class="panel-body">
          <%= form_for(@current_user, :remote => true) do |f| %>
          <%= render 'shared/error_messages', object: f.object %>
          <fieldset>
            <div class="form-group">
              <%= f.email_field :email, class: 'form-control', placeholder: t('email'), autofocus: true %>
            </div>
            <div class="form-group">
              <%= f.text_field :first_name, class: 'form-control', placeholder: t('first_name') %>
            </div>
            <div class="form-group">
              <%= f.text_field :last_name, class: 'form-control', placeholder: t('last_name') %>
            </div>
            <div class="form-group">
              <%= f.password_field :password, class: 'form-control', placeholder: t('password') %>
            </div>
            <div class="form-group">
              <%= f.password_field :password_confirmation, class: 'form-control', placeholder: t('password_confirm') %>
            </div>
            <div class="form-group">
              <%= f.select :technology_id, options_for_select(@technologies.collect { |tech| [tech.title, tech.id] }, @current_user.technology_id), {}, { id: 'users_technologies_select_' + @current_user.id.to_s, :class => 'form-control'} %>
            </div>
            <div class="form-group">
              <%= f.select :position_id, options_for_select(@positions.where(:technology_id => @current_user.technology_id).collect { |pos| [pos.title, pos.id] }, 0), {:selected => @current_user.position_id}, {id: 'users_positions_select_' + @current_user.id.to_s, :class => 'form-control'} %>
            </div>
            <div class="form-group">
              <%= f.collection_select :client_id, @clients, :id, :title, {}, {:class => 'form-control'} %>
            </div>
            <%= f.submit t('button_save_changes'), class: "btn btn-lg btn-success btn-block" %>
          </fieldset>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>