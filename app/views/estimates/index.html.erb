<% provide(:title, t('estimates')) %>
<h1><%= t('estimates') %></h1>

<div class="panel panel-default">
  <div class="panel-heading">
    <div class="input-group">
      <div class="input-group-btn">
        <button type="button" class="btn btn-primary" aria-label="Left Align">
          <%= link_to t('create_estimate'), new_estimate_path, :class => "btn-primary" %>
        </button>
      </div>
      <div class="form-group">
        <%= form_tag :url => estimates_path do |f| %>
          <%= autocomplete_field 'ac_search_estimate', '', autocomplete_estimate_title_estimates_path(:format => :json), { class: 'form-control', autofocus: true, placeholder: t('search') } %>
        <% end %>
      </div>
    </div>
  </div>
  <table class="table">
    <thead>
      <tr>
        <th><%= t('id') %></th>
        <th><%= t('client') %></th>
        <th><%= t('project') %></th>
        <th><%= t('estimate_owner') %></th>
        <th><%= t('title') %></th>
        <th>&nbsp;</th>
      </tr>
    </thead>
    <tbody>
      <% @estimates.each do |estimate| %>
      <tr>
        <td class="col-md-1 vert-align" scope="row"><%= estimate.id %></td>
        <td class="col-md-2 vert-align"><%= Client.find_by(:id => estimate.client_id).title %></td>
        <td class="col-md-2 vert-align"><%= Project.find_by(:id => estimate.project_id).title %></td>
        <td class="col-md-2 vert-align">
          <a href="mailto:<%= User.find_by(:id => estimate.owner_user_id).username %>"><%= User.find_by(:id => estimate.owner_user_id).first_name %> <%= User.find_by(:id => estimate.owner_user_id).last_name %></a>
        </td>
        <td class="vert-align"><%= link_to estimate.title, estimate %></td>
        <td width="1%" nowrap>
          <%= button_to estimate, method: :delete, data: { confirm: t('delete_confirm') }, class: "btn btn-default btn-sm" do %>
            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
          <% end %>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>

<%= will_paginate @estimates, :renderer => BootstrapPagination::Rails %>